

# 工作日报

## 2020-09-16

- 智能物联网关cube设备

  1- 语音模块使用azero替换Rokid

  ```
  	1-1 处理了技能命中错乱的问题，已经完成90%，后期再有问题可以针对摸个技能命中单独处理，并且是azero云平台上处理，本地无需再出版本配合处理；
  
  	1-2 azero新出了一个SDK版本优化了唤醒率和误唤醒率的问题，目前正在集成并验证中；
  
  	1-3 目前多彩在意的两个问题：技能命中错乱、唤醒后应答音太过单一 目前都已经解决，按照彭总的意思，可以出版本进集成。
  
  	整体进展：目前一共15个问题，目前已经解决了7个。
  ```





## 2020-09-17

- 智能物联网关cube设备

  1- 语音模块使用azero替换Rokid

  ```
  	1-1 集成azero提供的新版本SDK（18号提供），更新内容：优化唤醒率和误唤醒率；
  	遇到问题： 集成新版本的SDK 根本无法唤醒；但只要切换回过去版本（15号提供）可正常使用；
  	已经反馈给azero；
  
  	整体进展：目前一共15个问题，目前已经解决了7个。
  ```



## 2020-09-18

- 智能物联网关cube设备

  1- 语音模块使用azero替换Rokid

  ```
  	1-1 使用老版本的SDK 进集成；
  	问题： 
  		a- 使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；
  			问题已经反馈给azero和多彩。
  		b- 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；
  
  		c- 
  ```





## 2020-09-21

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid
     - 集成测试问题： 
       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**
          1. azero问题分析以及方案： 
             1. 分析这个问题可能有几个原因：1）算法库无asr 数据回调 2）sample代码中处理灌数据的存在bug 3）sdk中收到asr数据处理有问题 。
             2. 为此我们增加更多log和debug手段（在本地存储音频文件）出一个版本去复现问题，重现下问题抓到更多log 和数据应该能定位问题，进一步分析解决。
       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；
  2. RJ11项目需求
     - 通话过程中对端的音频声音很小 优化
       1. 方案：调整MIC GAIN来扩大音频的音量
          1. MTK反馈cube设备使用的数字MIC ， 无法调整MIC GAIN，详细内容请查看邮件。





## 2020-09-22

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展： 提供给debug版本给azero去复现，我们配合。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。

       3. 跟集成测试、王建功、彭彪一起讨论了一下所有问题的定位以及如何处理。目前需要我们处理的问题为0，都是需要azero处理完后提供新的SDK版本我们集成即可。





## 2020-09-23

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展： 提供给debug版本给azero去复现，我们配合。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。

       3. 跟集成测试、王建功、彭彪一起讨论了一下所有问题的定位以及如何处理。目前需要我们处理的问题为0，都是需要azero处理完后提供新的SDK版本我们集成即可。







## 2020-09-24

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

       3. RJ11合入trunk分支后的新版本无法正常使用语音唤醒、识别、TTS等功能，确定是由于Launcher崩溃导致。







## 2020-09-25

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

       3. RJ11合入trunk分支后的新版本无法正常使用语音唤醒、识别、TTS等功能。

          1. Launcher怀疑azero进程启动时暂用了Launcher的资源，让azero进程自己做个开机启动。已经完成并提供版本。

       4. 开始接触RJ11项目，向王步云请教整个流程。







## 2020-09-27

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

       3. RJ11合入trunk分支后的新版本滑动解锁时，界面卡死。

          1. 问题怀疑方向：AZERO 进程占用CPU太高。
          2. 处理问题方案：1- 让azero进程在使用mic是不要占用CPU太高（需要azero出版本）；2- 在进入系统之前不启动azero核心进程，就不会占用CPU太高。在完全进入Launcher界面后在手动启动azero核心进程。
          3. 根据方案2 出了一个版本，在没有RJ11版本中还是可以正常使用。但是合入RJ11，Launcher不会卡死，但是azero无法正常使用，原因：获取不到mic数据。

       4. 开始接触RJ11项目，向王步云请教整个流程。今日无进展









## 2020-09-29

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。

       3. RJ11合入trunk分支后的新版本滑动解锁时，界面卡死。

          ​	问题已经解决，处理方法是王建功回退MTK驱动层代码；

       4. 开始接触RJ11项目，向王步云请教整个流程。完成5%

       5. azero新版本的SDK集成后无法正常使用。

          1. 现象：集成后，能跑起来，读mic数据正常并灌入azeroSDK中，但SDK中唤醒或者语音识别都会讲数据回调到上层，上层收不到唤醒信息和语音流信息。
          2. 将SDK 切换回老版本， 上层可收到唤醒事件和语音流信息，并正常使用。
          3. 问题分析，需要azero算法库看看流程走到哪里了，昨天已经将新SDK编译的系统版本提供给azero。

       6. azero 占用CPU过高。

          1. 需要把问题5处理后才能优化CPU

       7. 产测eng版本不需要启动azero进程。

          1. 方案： eng版本再system/etc 目录下有一个tinyTest 文件，azero可以在进程启动之前判断是否有这个问题件。

          2. 完成进度： 90%，本地编译版本测试完成，已经提交代码。待jenkins上版本出来后再次自测。

             







## 2020-10-09

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。暂停

          

       3. 开始接触RJ11项目，向王步云请教整个流程。完成5%, 暂停

       4. azero新版本的SDK集成后可使用，但是唤醒率非常低，低于30%。

          1. 已经反馈给azero；
          2. 后续有新版本继续配合集成并验证；

       5. azero 占用CPU过高。

          1. 需要把问题4处理后才能优化CPU；
          2. 新版本的SDK 可使用后，CPU 的占用率并没有得到很好优化；已反馈给azero;

       6. 产测eng版本不需要启动azero进程。完成100%

       7. RJ11 新方案azero这边释放或占用MIC后需要通知Launcher。完成30%

          1. 编码已经完成100%；下一步自测、联调（需要Launcher 配合）。

          



## 2020-10-10

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。暂停

          

       3. 开始接触RJ11项目，向王步云请教整个流程。完成5%, 暂停

       4. azero新版本的SDK集成后可使用，但是唤醒率非常低，低于30%。

          1. 已经反馈给azero；
          2. 后续有新版本继续配合集成并验证；

       5. azero 占用CPU过高。

          1. 需要把问题4处理后才能优化CPU；
          2. 新版本的SDK 可使用后，CPU 的占用率并没有得到很好优化；已反馈给azero;
          3. 内部标准：
             1. 无唤醒状态下：< 80% ;
             2. 唤醒或语音识别状态下：< 160% ;

       6. RJ11 新方案azero这边释放或占用MIC后需要通知Launcher。完成70%

          1. 自测完成，版本已经提供给应用组李浩；下一步联调（需要Launcher 配合）。





## 2020-10-12

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。（已经多次发邮件跟踪）

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。暂停

          

       3. 开始接触RJ11项目，向王步云请教整个流程。完成5%, 暂停

       4. azero新版本的SDK集成后可使用，但是唤醒率非常低，低于30%。

          1. 已经反馈给azero；
          2. 后续有新版本继续配合集成并验证；

       5. azero 占用CPU过高。（已经多次发邮件跟踪）

          1. 需要把问题4处理后才能优化CPU；
          2. 新版本的SDK 可使用后，CPU 的占用率并没有得到很好优化；已反馈给azero;
          3. 内部标准：
             1. 无唤醒状态下：< 80% ;
             2. 唤醒或语音识别状态下：< 160% ;

       6. RJ11 新方案azero这边释放或占用MIC后需要通知Launcher。完成70%

          1. 自测完成，版本已经提供给应用组李浩；下一步联调（需要Launcher 配合）。
          2. 整理azero代码，并上传代码；完成。







## 2020-10-13

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。（已经多次发邮件跟踪）

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。暂停

          

       3. 开始接触RJ11项目，向王步云请教整个流程。完成5%, 暂停

       4. azero新版本的SDK集成后可使用，但是唤醒率非常低，低于30%。

          1. 已经反馈给azero；
          2. 后续有新版本继续配合集成并验证；

       5. azero 占用CPU过高。（已经多次发邮件跟踪）

          1. 需要把问题4处理后才能优化CPU；
          2. 新版本的SDK 可使用后，CPU 的占用率并没有得到很好优化；已反馈给azero;
          3. 内部标准：
             1. 无唤醒状态下：< 80% ;
             2. 唤醒或语音识别状态下：< 160% ;

       6. RJ11 新方案azero这边释放或占用MIC后需要通知Launcher。完成100%

          1. 联调完成。
          2. apk.Android.mk 已经相关的so 库都已经提交到SVN；完成100%。







## 2020-10-14

- 智能物联网关cube设备

  1. 语音模块使用azero替换Rokid

     - 集成测试问题： 

       1. **使用12小时左右后，能正常的语音唤醒，但是无法语音识别；  问题严重性：非常严重；问题已经反馈给azero和多彩。**

          目前进展：继续配合复现该问题。（已经多次发邮件跟踪）

       2. 还是有很多音乐相关的问题；但是多彩那边已经邮件通知音乐相关的问题暂时不用考虑，可以先提供版本，后期再优化；优先级不高。azero提供了一个处理方案，处理播放下一首音乐的时候回自动弹出音乐界面的问题，需要验证。

          多彩不在意的问题目前都已经暂停处理，本次版本中不处理。暂停

          

       3. 开始接触RJ11项目，向王步云请教整个流程。完成5%, 暂停

       4. azero新版本的SDK集成后可使用，但是唤醒率非常低，低于30%。

          1. 已经反馈给azero；
          2. 后续有新版本继续配合集成并验证；

       5. azero 占用CPU过高。（已经多次发邮件跟踪）

          1. 需要把问题4处理后才能优化CPU；
          2. 新版本的SDK 可使用后，CPU 的占用率并没有得到很好优化；已反馈给azero;
          3. 内部标准：
             1. 无唤醒状态下：< 80% ;
             2. 唤醒或语音识别状态下：< 160% ;

       6. RJ11 新方案azero这边释放或占用MIC后需要通知Launcher。完成100%

          1. 大版本验证。完成100%

             