# 文件及目录操作



## 1- 基本文件操作

### 创建一个文件写

``` python
#打开一个文件
#file = open(file [,mode [,buffering]])

file = open("notice.txt","a+",encoding='utf-8')
file.write("你好吗？")
file.close()   # 关闭文件
```



### 读

``` python
file = open("notice.txt","r+",encoding='utf-8')
# file.seek(0)
contect = file.readline()
print(contect)
file.close()   # 关闭文件
```



### with  不用手动close()

``` python
#with
# with expression as target:
#       with-body
# 使用with 就可以不用手动close文件


with open("notice.txt","r") as file:
    content = file.readline()
    print(content)

with open("notice.txt","a") as file:
    file.write("我叫Tom")
```



### seek() 

``` python
# seek()
# 将文件的指针移动到一个新的位置
# file.seek(offset[,whence])
# offset ： 指移动的字符个数，
# whence ：指从什么位置开始计算： 0表示 文件头； 1 表示当前位置； 2 表示文件末尾；  默认为0

with open("notice.txt","r") as file:
    file.seek(10)  # 由于文件是UTF-8格式的，每个中文汉字暂用了3个字符
    con = file.read(6)
    print(con)
```



### read() 读取全部内容

### readline()读取一行内容

### readlines()读取全部内容，返回一个列表，每行内容为一个元素





## 2- 目录操作

### os  name、linesep、sep、getcwd、listdir、isdir、isfile

``` python

import  os
name = os.name  # 获取操作系统类型  posix ： linux /MAC   nt : Windows
print(name)

linesep = os.linesep # 获取当前系统的换行符     windows "\r\n"  Linux或Mac  "\n"
print(linesep)

sep = os.sep # 获取当前系统的路径分隔符  windows "\\"  Linux 或Mac "/"
print(sep)

cwd = os.getcwd()  # 获取当前工作目录
print(cwd)

lists = os.listdir("../") # 获取指定路径下的文件和目录信息
print(lists)
print(type(lists))
for dir in lists:
    print(dir)
    isDir = os.path.isdir("../" + dir)  # 判断是否为目录
    print(isDir)
    isFile = os.path.isfile("../" + dir) # 判断是否为文件
    print(isFile)


```



### 创建目录 mkdir makedirs 

``` python
import os
os.mkdir("aaa")
os.makedirs("bbb/ccc/ddd")
```



### 删除空目录 rmdir  removedirs

``` python
import os
# os.mkdir("aaa")
# os.makedirs("bbb/ccc/ddd")
os.rmdir("aaa")  ## 注意： rmdir只能删除一个空目录
os.removedirs("bbb/ccc/ddd")

```

``` python
import os
os.rmdir("aaa")  # 如果aaa 目录下有文件或者子目录

结果：
Traceback (most recent call last):
  File "/Users/tanghui/work/Python/PythonStudy/day06/file.py", line 123, in <module>
    os.rmdir("aaa")
OSError: [Errno 66] Directory not empty: 'aaa'

```



### 删除非空目录 shutil rmtree

``` python

import shutil
import os

shutil.rmtree("aaa")  # 如果aaa 下面有子文件或者子目录也可以正常删除
shutil.rmtree("bbb")	# 如果bbb 下面有子文件或者子目录也可以正常删除


```







### os.path 绝对路径、是否存在、路径_文件拼接、文件名__扩展名分离、获取文件名、获取路径名、是否为路径、是否为文件

``` python

import  os
abspath = os.path.abspath("./")  # 获取文件或目录的绝对路径
print(abspath)

isExisit = os.path.exists("../day04")
print(isExisit)

abspath = os.path.abspath("./")  # 获取文件或目录的绝对路径
fileName = "test.txt"
filePath = os.path.join(abspath,fileName)  # 将目录与目录或者文件名拼接起来
print(filePath)

fileName = "test.txt"
fileNameExt = os.path.splitext(fileName)  # 文件名__扩展名分离
print(fileNameExt)


correntDir = os.getcwd()
filePath = os.path.join(correntDir,"file.py") # # 将目录与目录或者文件名拼接起来
print(filePath)
fileName = os.path.basename(filePath)  # 获取文件路径中的文件名称
print(fileName)
dirName = os.path.dirname(filePath)     # 获取文件路径中的路径名称
print(dirName)


```



### split分离路径和文件     splitext分离文件名称和扩展名

``` python

# 分离路径和文件
# 分离文件名称和扩展名
import  os

fileName = "./notice.txt"
(dir,tempfilename) = os.path.split(fileName)
(filename,extName) = os.path.splitext(tempfilename)

print(dir)
print(tempfilename)
print(filename)
print(extName)

结果： 
.
notice.txt
notice
.txt
```



### 遍历目录

``` python
# 遍历目录
import os

tuples = os.walk("./",topdown=True)
for tuple in tuples:
    print(tuple)

print("分割线".center(50,"-"))

for root ,dirs, files in os.walk("./",topdown = True):
    # for dirName in dirs:
    #     print(os.path.join(root,dirName))
    for fileName in files:
        print(os.path.join(root,fileName))
        
结果：
('./', ['bbb', 'aaa'], ['notice.txt', 'file.py'])
('./bbb', ['ccc'], ['bbb.txt'])
('./bbb/ccc', [], ['ccc.txt'])
('./aaa', [], ['test.txt'])
-----------------------分割线------------------------
./notice.txt
./file.py
./bbb/bbb.txt
./bbb/ccc/ccc.txt
./aaa/test.txt
```





## 3- 高级文件操作